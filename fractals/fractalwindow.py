# Form implementation generated from reading ui file 'FractalWindow.ui'
#
# Created by: PyQt6 UI code generator 6.4.2
#
# WARNING: Any manual changes made to this file will be lost when pyuic6 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt6 import QtCore, QtGui, QtWidgets
from PyQt6.QtCore import pyqtSignal
from PyQt6.QtGui import QPixmap
from PyQt6.QtWidgets import QSizePolicy, QLabel

from fractals.fractal import *
from fractals.cut import *


class ClickableLabel(QLabel):
    clicked = pyqtSignal()

    def mousePressEvent(self, event):
        self.clicked.emit()


class Ui_FractalWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(851, 600)
        self.centralwidget = QtWidgets.QWidget(parent=MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.label = QtWidgets.QLabel(parent=self.centralwidget)
        self.label.setGeometry(QtCore.QRect(20, 200, 191, 31))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.label.setFont(font)
        self.label.setObjectName("label")
        self.gridLayoutWidget = QtWidgets.QWidget(parent=self.centralwidget)
        self.gridLayoutWidget.setGeometry(QtCore.QRect(40, 250, 380, 133))
        self.gridLayoutWidget.setObjectName("gridLayoutWidget")
        self.gridLayout = QtWidgets.QGridLayout(self.gridLayoutWidget)
        self.gridLayout.setContentsMargins(0, 0, 0, 0)
        self.gridLayout.setObjectName("gridLayout")
        self.precision = QtWidgets.QSpinBox(parent=self.gridLayoutWidget)
        self.precision.setMinimum(1)
        self.precision.setMaximum(1000)
        self.precision.setObjectName("precision")
        self.gridLayout.addWidget(self.precision, 3, 1, 1, 1)
        self.label_3 = QtWidgets.QLabel(parent=self.gridLayoutWidget)
        self.label_3.setObjectName("label_3")
        self.gridLayout.addWidget(self.label_3, 1, 0, 1, 1)
        self.cut_fractal_order = QtWidgets.QSpinBox(parent=self.gridLayoutWidget)
        self.cut_fractal_order.setMinimum(1)
        self.cut_fractal_order.setMaximum(5)
        self.cut_fractal_order.setObjectName("cut_fractal_order")
        self.gridLayout.addWidget(self.cut_fractal_order, 1, 3, 1, 1)
        self.sinz_cosz_rbutt = QtWidgets.QRadioButton(parent=self.gridLayoutWidget)
        self.sinz_cosz_rbutt.setObjectName("sinz_cosz_rbutt")
        self.gridLayout.addWidget(self.sinz_cosz_rbutt, 0, 2, 1, 1)
        self.label_5 = QtWidgets.QLabel(parent=self.gridLayoutWidget)
        self.label_5.setObjectName("label_5")
        self.gridLayout.addWidget(self.label_5, 1, 2, 1, 1)
        self.label_4 = QtWidgets.QLabel(parent=self.gridLayoutWidget)
        self.label_4.setObjectName("label_4")
        self.gridLayout.addWidget(self.label_4, 2, 0, 1, 1)
        self.iterations_number = QtWidgets.QSpinBox(parent=self.gridLayoutWidget)
        self.iterations_number.setMinimum(1)
        self.iterations_number.setMaximum(500)
        self.iterations_number.setObjectName("iterations_number")
        self.gridLayout.addWidget(self.iterations_number, 2, 1, 1, 1)
        self.cut_rbutt = QtWidgets.QRadioButton(parent=self.gridLayoutWidget)
        self.cut_rbutt.setObjectName("cut_rbutt")
        self.gridLayout.addWidget(self.cut_rbutt, 0, 3, 1, 1)
        self.f_ch_rbutt = QtWidgets.QRadioButton(parent=self.gridLayoutWidget)
        self.f_ch_rbutt.setObjectName("f_ch_rbutt")
        self.gridLayout.addWidget(self.f_ch_rbutt, 0, 1, 1, 1)
        self.label_6 = QtWidgets.QLabel(parent=self.gridLayoutWidget)
        self.label_6.setObjectName("label_6")
        self.gridLayout.addWidget(self.label_6, 3, 0, 1, 1)
        self.label_2 = QtWidgets.QLabel(parent=self.gridLayoutWidget)
        font = QtGui.QFont()
        font.setPointSize(13)
        self.label_2.setFont(font)
        self.label_2.setObjectName("label_2")
        self.gridLayout.addWidget(self.label_2, 0, 0, 1, 1)
        self.color_schema = QtWidgets.QComboBox(parent=self.gridLayoutWidget)
        self.color_schema.setObjectName("color_schema")
        self.color_schema.addItem("")
        self.color_schema.addItem("")
        self.color_schema.addItem("")
        self.color_schema.addItem("")
        self.color_schema.addItem("")
        self.gridLayout.addWidget(self.color_schema, 1, 1, 1, 1)
        self.label_7 = QtWidgets.QLabel(parent=self.gridLayoutWidget)
        self.label_7.setObjectName("label_7")
        self.gridLayout.addWidget(self.label_7, 4, 1, 1, 1)
        self.Scaling = QtWidgets.QDoubleSpinBox(parent=self.gridLayoutWidget)
        self.Scaling.setObjectName("Scaling")
        self.gridLayout.addWidget(self.Scaling, 4, 2, 1, 1)
        self.draw_fractal_button = QtWidgets.QPushButton(parent=self.centralwidget)
        self.draw_fractal_button.setGeometry(QtCore.QRect(180, 400, 111, 51))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.draw_fractal_button.setFont(font)
        self.draw_fractal_button.setObjectName("draw_fractal_button")
        self.widget = QtWidgets.QWidget(parent=self.centralwidget)
        self.widget.setGeometry(QtCore.QRect(430, 70, 411, 371))
        self.widget.setObjectName("widget")
        self.image = QtWidgets.QLabel(parent=self.widget)
        self.image.setGeometry(QtCore.QRect(8, 5, 401, 361))
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Policy.Expanding, QtWidgets.QSizePolicy.Policy.Expanding)
        sizePolicy.setHorizontalStretch(1)
        sizePolicy.setVerticalStretch(1)
        sizePolicy.setHeightForWidth(self.image.sizePolicy().hasHeightForWidth())
        self.image.setSizePolicy(sizePolicy)
        self.image.setText("")
        self.image.setScaledContents(False)
        self.image.setAlignment(QtCore.Qt.AlignmentFlag.AlignCenter)
        self.image.setObjectName("image")
        self.clear_button = QtWidgets.QPushButton(parent=self.centralwidget)
        self.clear_button.setGeometry(QtCore.QRect(580, 460, 111, 51))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.clear_button.setFont(font)
        self.clear_button.setObjectName("clear_button")
        self.horizontalLayoutWidget = QtWidgets.QWidget(parent=self.centralwidget)
        self.horizontalLayoutWidget.setGeometry(QtCore.QRect(0, 0, 851, 41))
        self.horizontalLayoutWidget.setObjectName("horizontalLayoutWidget")
        self.horizontalLayout = QtWidgets.QHBoxLayout(self.horizontalLayoutWidget)
        self.horizontalLayout.setContentsMargins(0, 0, 0, 0)
        self.horizontalLayout.setObjectName("horizontalLayout")
        spacerItem = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Policy.Expanding, QtWidgets.QSizePolicy.Policy.Minimum)
        self.horizontalLayout.addItem(spacerItem)
        self.mainPage = ClickableLabel(parent=self.horizontalLayoutWidget)
        font = QtGui.QFont()
        font.setBold(False)
        self.mainPage.setFont(font)
        self.mainPage.setObjectName("mainPage")
        self.horizontalLayout.addWidget(self.mainPage)
        spacerItem1 = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Policy.Expanding, QtWidgets.QSizePolicy.Policy.Minimum)
        self.horizontalLayout.addItem(spacerItem1)
        self.lab1 = ClickableLabel(parent=self.horizontalLayoutWidget)
        font = QtGui.QFont()
        font.setBold(True)
        self.lab1.setFont(font)
        self.lab1.setObjectName("lab1")
        self.horizontalLayout.addWidget(self.lab1)
        spacerItem2 = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Policy.Expanding, QtWidgets.QSizePolicy.Policy.Minimum)
        self.horizontalLayout.addItem(spacerItem2)
        self.lab2 = ClickableLabel(parent=self.horizontalLayoutWidget)
        self.lab2.setObjectName("lab2")
        self.horizontalLayout.addWidget(self.lab2)
        spacerItem3 = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Policy.Expanding, QtWidgets.QSizePolicy.Policy.Minimum)
        self.horizontalLayout.addItem(spacerItem3)
        self.lab3 = ClickableLabel(parent=self.horizontalLayoutWidget)
        self.lab3.setObjectName("lab3")
        self.horizontalLayout.addWidget(self.lab3)
        spacerItem4 = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Policy.Expanding, QtWidgets.QSizePolicy.Policy.Minimum)
        self.horizontalLayout.addItem(spacerItem4)
        self.lectures = ClickableLabel(parent=self.horizontalLayoutWidget)
        font = QtGui.QFont()
        font.setBold(False)
        self.lectures.setFont(font)
        self.lectures.setObjectName("lectures")
        self.horizontalLayout.addWidget(self.lectures)
        spacerItem5 = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Policy.Expanding, QtWidgets.QSizePolicy.Policy.Minimum)
        self.horizontalLayout.addItem(spacerItem5)
        self.about = ClickableLabel(parent=self.horizontalLayoutWidget)
        font = QtGui.QFont()
        font.setBold(False)
        self.about.setFont(font)
        self.about.setObjectName("about")
        self.horizontalLayout.addWidget(self.about)
        spacerItem6 = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Policy.Expanding, QtWidgets.QSizePolicy.Policy.Minimum)
        self.horizontalLayout.addItem(spacerItem6)
        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtWidgets.QMenuBar(parent=MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 851, 22))
        self.menubar.setObjectName("menubar")
        MainWindow.setMenuBar(self.menubar)
        self.statusbar = QtWidgets.QStatusBar(parent=MainWindow)
        self.statusbar.setObjectName("statusbar")
        MainWindow.setStatusBar(self.statusbar)

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

        # Own code here
        self.color_schema.setEnabled(False)
        self.iterations_number.setEnabled(False)
        self.precision.setEnabled(False)
        self.cut_fractal_order.setEnabled(False)
        self.draw_fractal_button.setEnabled(False)
        self.clear_button.setEnabled(False)

        self.add_functions()

        self.image.setPixmap(QPixmap())
        self.image.setPixmap(QPixmap("gray_placeholder.png"))

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "FractalWindow"))
        self.label.setText(_translate("MainWindow", "Fill in the forms"))
        self.label_3.setText(_translate("MainWindow", "Color schema:"))
        self.sinz_cosz_rbutt.setText(_translate("MainWindow", "sin(z) * cos (z)"))
        self.label_5.setText(_translate("MainWindow", "Enter fractal order:"))
        self.label_4.setText(_translate("MainWindow", "Number of iterations:"))
        self.cut_rbutt.setText(_translate("MainWindow", "Cut fractal"))
        self.f_ch_rbutt.setText(_translate("MainWindow", "ch(z)"))
        self.label_6.setText(_translate("MainWindow", "Precision:"))
        self.label_2.setText(_translate("MainWindow", "Fractal type:"))
        self.color_schema.setItemText(0, _translate("MainWindow", "viridis"))
        self.color_schema.setItemText(1, _translate("MainWindow", "plasma"))
        self.color_schema.setItemText(2, _translate("MainWindow", "inferno"))
        self.color_schema.setItemText(3, _translate("MainWindow", "magma"))
        self.color_schema.setItemText(4, _translate("MainWindow", "cividis"))
        self.label_7.setText(_translate("MainWindow", "Scaling:"))
        self.draw_fractal_button.setText(_translate("MainWindow", "Submit"))
        self.clear_button.setText(_translate("MainWindow", "Clear"))
        self.mainPage.setText(_translate("MainWindow", "Main page"))
        self.lab1.setText(_translate("MainWindow", "Lab 1"))
        self.lab2.setText(_translate("MainWindow", "Lab 2"))
        self.lab3.setText(_translate("MainWindow", "Lab 3"))
        self.lectures.setText(_translate("MainWindow", "Lectures"))
        self.about.setText(_translate("MainWindow", "About"))

    def add_functions(self):
        self.draw_fractal_button.clicked.connect(lambda: self.create_fractal())
        self.clear_button.clicked.connect(lambda: self.clear_image())
        self.f_ch_rbutt.clicked.connect(lambda: self.enable_f_settings())
        self.sinz_cosz_rbutt.clicked.connect(lambda: self.enable_f_settings())
        self.cut_rbutt.clicked.connect(lambda: self.enable_cut_settings())
        self.Scaling.valueChanged.connect(lambda: self.change_scaling())

    def create_fractal(self):

        if self.f_ch_rbutt.isChecked():
            save_fractal(build_fractal_ch_z(self.precision.value(), self.iterations_number.value()),
                         self.color_schema.currentText())
        if self.sinz_cosz_rbutt.isChecked():
            save_fractal(build_fractal_sin_z_cos_z(self.precision.value(), self.iterations_number.value()),
                         self.color_schema.currentText())
        if self.cut_rbutt.isChecked():
            build_cut_fractal(self.cut_fractal_order.value())

        self.image.setPixmap(QPixmap())
        self.image.setPixmap(QPixmap("fractal.png"))
        self.image.setScaledContents(False)
        self.image.setSizePolicy(QSizePolicy(QSizePolicy.Policy.Ignored, QSizePolicy.Policy.Ignored))

    def clear_image(self):
        self.image.setPixmap(QPixmap())

    def enable_f_settings(self):
        self.color_schema.setEnabled(True)
        self.iterations_number.setEnabled(True)
        self.precision.setEnabled(True)
        self.cut_fractal_order.setEnabled(False)
        self.draw_fractal_button.setEnabled(True)
        self.clear_button.setEnabled(True)

    def enable_cut_settings(self):
        self.color_schema.setEnabled(False)
        self.iterations_number.setEnabled(False)
        self.precision.setEnabled(False)
        self.cut_fractal_order.setEnabled(True)
        self.draw_fractal_button.setEnabled(True)
        self.clear_button.setEnabled(True)

    def change_scaling(self):
        pixmap = QPixmap("fractal.png")
        pixmap = pixmap.scaled(pixmap.size() * self.Scaling.value())

        self.image.setPixmap(pixmap)

